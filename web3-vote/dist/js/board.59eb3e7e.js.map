{"version":3,"file":"js/board.59eb3e7e.js","mappings":"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","sources":["webpack://web3-vote/./src/views/BoardView.vue","webpack://web3-vote/./src/views/BoardView.vue?edf9"],"sourcesContent":["import _regeneratorRuntime from \"E:/sbt-voting-dapp/web3-vote/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"E:/sbt-voting-dapp/web3-vote/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createBlock as _createBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"box3\"\n};\nvar _hoisted_2 = {\n  key: 0,\n  style: {\n    \"text-align\": \"center\",\n    \"color\": \"#999\",\n    \"padding\": \"20px\"\n  }\n};\nimport useWeb3 from \"../hooks/useWeb3\";\nimport { ref, onMounted } from \"vue\";\nimport { showToast } from \"vant\"; // Á°Æ‰øù‰ªé vant ÂØºÂÖ• showToast\n//\n\nexport default {\n  __name: 'BoardView',\n  setup: function setup(__props) {\n    var _useWeb = useWeb3(),\n      web3 = _useWeb.web3,\n      voteContract = _useWeb.voteContract,\n      getAccount = _useWeb.getAccount;\n\n    // ÁúãÊùø‰ø°ÊÅØ\n    var board = ref([]);\n\n    //\n    // src/views/BoardView.vue\n\n    var getBoardInfo = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var result;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (voteContract) {\n                _context.next = 2;\n                break;\n              }\n              return _context.abrupt(\"return\");\n            case 2:\n              _context.prev = 2;\n              _context.next = 5;\n              return voteContract.methods.getBoardInfo().call();\n            case 5:\n              result = _context.sent;\n              board.value = result;\n              _context.next = 13;\n              break;\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](2);\n              console.error(\"Ëé∑ÂèñÁúãÊùø‰ø°ÊÅØÂ§±Ë¥•:\", _context.t0);\n              showToast(\"Ëé∑ÂèñÊäïÁ•®ÁúãÊùøÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÂêàÁ∫¶ÂíåÁΩëÁªúËøûÊé•„ÄÇ\");\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[2, 9]]);\n      }));\n      return function getBoardInfo() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var vote = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(index) {\n        var account, loadingToast;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              if (voteContract) {\n                _context2.next = 2;\n                break;\n              }\n              return _context2.abrupt(\"return\");\n            case 2:\n              _context2.next = 4;\n              return getAccount();\n            case 4:\n              account = _context2.sent;\n              if (account) {\n                _context2.next = 7;\n                break;\n              }\n              return _context2.abrupt(\"return\", showToast(\"ËØ∑ËøûÊé•MetaMaskÔºÅ\"));\n            case 7:\n              // üöÄ Vant Toast ‰øÆÊ≠£Ôºö‰ΩøÁî® showToast() ÂáΩÊï∞Ë∞ÉÁî®Âπ∂ÊåáÂÆö type\n              loadingToast = null;\n              _context2.prev = 8;\n              // ‰øÆÊ≠£Áî®Ê≥ïÔºö‰ΩøÁî® showToast({ type: 'loading', ... }) Êõø‰ª£ showToast.loading()\n              loadingToast = showToast({\n                type: 'loading',\n                message: 'Ê≠£Âú®ÂèëÈÄÅÊäïÁ•®‰∫§Êòì...',\n                forbidClick: true,\n                duration: 0\n              });\n              _context2.next = 12;\n              return voteContract.methods.vote(index).send({\n                from: account\n              });\n            case 12:\n              if (loadingToast) loadingToast.close(); // ‰∫§ÊòìÊàêÂäüÂêéÂÖ≥Èó≠ÊèêÁ§∫\n              showToast(\"ÊäïÁ•®ÊàêÂäüÔºÅ\");\n              // ÊäïÁ•®ÊàêÂäüÂêéÂà∑Êñ∞ÁúãÊùø\n              _context2.next = 16;\n              return getBoardInfo();\n            case 16:\n              _context2.next = 23;\n              break;\n            case 18:\n              _context2.prev = 18;\n              _context2.t0 = _context2[\"catch\"](8);\n              console.error(\"ÊäïÁ•®Â§±Ë¥•:\", _context2.t0);\n              if (loadingToast) loadingToast.close(); // ‰∫§ÊòìÂ§±Ë¥•Êó∂ÂÖ≥Èó≠ÊèêÁ§∫\n              showToast(\"ÊäïÁ•®Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÊòØÂê¶ÊúâÊäïÁ•®ÊùÉÊàñÂ∑≤ÊäïÁ•®„ÄÇ\");\n            case 23:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[8, 18]]);\n      }));\n      return function vote(_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    // ‚ùå ÁßªÈô§ initEventListen()ÔºöÊÇ®ÁöÑÂêàÁ∫¶‰∏≠Ê≤°ÊúâÂÆö‰πâ‰∫ã‰ª∂ÔºåËØ•ÂáΩÊï∞Ë¢´ÁßªÈô§„ÄÇ\n\n    onMounted(function () {\n      getBoardInfo();\n    });\n    return function (_ctx, _cache) {\n      var _component_van_divider = _resolveComponent(\"van-divider\");\n      var _component_van_button = _resolveComponent(\"van-button\");\n      var _component_van_cell = _resolveComponent(\"van-cell\");\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_van_divider, null, {\n        \"default\": _withCtx(function () {\n          return [_createTextVNode(\"ÊäïÁ•®ÁúãÊùø\")];\n        }),\n        _: 1\n      }), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(board.value, function (item, index) {\n        return _openBlock(), _createBlock(_component_van_cell, {\n          title: item.name,\n          icon: \"shop-o\",\n          key: index\n        }, {\n          \"right-icon\": _withCtx(function () {\n            return [_createVNode(_component_van_button, {\n              size: \"small\",\n              type: \"primary\",\n              onClick: function onClick($event) {\n                return vote(index);\n              }\n            }, {\n              \"default\": _withCtx(function () {\n                return [_createTextVNode(\" ÊäïÁ•® (\" + _toDisplayString(item.voteCount) + \" Á•®) \", 1)];\n              }),\n              _: 2\n            }, 1032, [\"onClick\"])];\n          }),\n          _: 2\n        }, 1032, [\"title\"]);\n      }), 128)), board.value.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, \" Âä†ËΩΩ‰∏≠ÊàñÊ≤°Êúâ‰∏ªÈ¢ò \")) : _createCommentVNode(\"\", true)]);\n    };\n  }\n};","/* unplugin-vue-components disabled */import script from \"./BoardView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BoardView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./BoardView.vue?vue&type=style&index=0&id=446606f4&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_hoisted_1","_hoisted_2","key","style","__name","setup","__props","_useWeb","useWeb3","voteContract","web3","getAccount","board","getBoardInfo","_ref","mark","_callee","result","wrap","_context","prev","next","abrupt","methods","call","sent","value","t0","console","error","stop","apply","this","arguments","vote","_ref2","_callee2","index","account","loadingToast","_context2","type","message","forbidClick","duration","send","from","close","_x","_ctx","_cache","_component_van_divider","_component_van_button","_component_van_cell","_","item","title","name","icon","size","onClick","$event","voteCount","length","__exports__"],"sourceRoot":""}