{"version":3,"file":"js/board.b43aecb9.js","mappings":"gWAMA,OAA2CA,EAAAA,EAAAA,KAA7BC,GAAF,EAAJC,KAAkB,EAAZD,cAAcE,EAAU,EAAVA,WAGtBC,GAAQC,EAAAA,EAAAA,IAAI,IAKZC,EAAY,yCAAG,6FACdL,EAAc,CAAF,yEAGQA,EAAaM,QAAQD,eAAeE,OAAM,OAAzDC,EAAS,EAAH,KACZL,EAAMM,MAAQD,EAAO,mDAErBE,QAAQC,MAAM,YAAa,EAAF,KACzBC,EAAAA,EAAAA,IAAU,wBAAwB,yDAEvC,kBAViB,mCAYZC,EAAI,yCAAG,WAAOC,GAAK,kFAClBd,EAAc,CAAF,gEACKE,IAAY,OAArB,GAAPa,EAAU,EAAH,KACRA,EAAS,CAAF,yCAASH,EAAAA,EAAAA,IAAU,iBAAe,OAWvC,OARHI,EAAe,KAAI,SAGnBA,GAAeJ,EAAAA,EAAAA,IAAU,CACrBK,KAAM,UACNC,QAAS,cACTC,aAAa,EACbC,SAAU,IACX,UAEGpB,EAAaM,QAAQO,KAAKC,GAAOO,KAAK,CAAEC,KAAMP,IAAU,QAI9D,OAFIC,GAAcA,EAAaO,SAC/BX,EAAAA,EAAAA,IAAU,SACV,UACMP,IAAc,6DAGpBK,QAAQC,MAAM,QAAS,EAAF,IACjBK,GAAcA,EAAaO,SAC/BX,EAAAA,EAAAA,IAAU,uBAAuB,0DAEtC,gBA5BS,sC,OAgCVY,EAAAA,EAAAA,KAAU,WACRnB,GACF,I,0qBCvDMoB,EAAc,EAEpB,G","sources":["webpack://web3-vote/./src/views/BoardView.vue","webpack://web3-vote/./src/views/BoardView.vue?3b6e"],"sourcesContent":["<script setup>\nimport useWeb3 from \"../hooks/useWeb3\";\nimport { ref, onMounted } from \"vue\";\nimport { showToast } from \"vant\"; // Á°Æ‰øù‰ªé vant ÂØºÂÖ• showToast\n//\n\nconst { web3, voteContract, getAccount } = useWeb3();\n\n// ÁúãÊùø‰ø°ÊÅØ\nconst board = ref([]);\n\n//\n// src/views/BoardView.vue\n\nconst getBoardInfo = async () => {\n  if (!voteContract) return;\n  try {\n      // üö® „Äê‰øÆÊ≠£ÁÇπ„Äë: Â∞Ü proposalList() Êîπ‰∏∫ getBoardInfo()\n      const result = await voteContract.methods.getBoardInfo().call(); \n      board.value = result;\n  } catch(error) {\n      console.error(\"Ëé∑ÂèñÁúãÊùø‰ø°ÊÅØÂ§±Ë¥•:\", error);\n      showToast(\"Ëé∑ÂèñÊäïÁ•®ÁúãÊùøÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÂêàÁ∫¶ÂíåÁΩëÁªúËøûÊé•„ÄÇ\");\n  }\n};\n\nconst vote = async (index) => {\n  if (!voteContract) return;\n  const account = await getAccount();\n  if (!account) return showToast(\"ËØ∑ËøûÊé•MetaMaskÔºÅ\");\n\n  // üöÄ Vant Toast ‰øÆÊ≠£Ôºö‰ΩøÁî® showToast() ÂáΩÊï∞Ë∞ÉÁî®Âπ∂ÊåáÂÆö type\n  let loadingToast = null;\n  try {\n      // ‰øÆÊ≠£Áî®Ê≥ïÔºö‰ΩøÁî® showToast({ type: 'loading', ... }) Êõø‰ª£ showToast.loading()\n      loadingToast = showToast({ \n          type: 'loading',\n          message: 'Ê≠£Âú®ÂèëÈÄÅÊäïÁ•®‰∫§Êòì...', \n          forbidClick: true,\n          duration: 0,\n      });\n\n      await voteContract.methods.vote(index).send({ from: account });\n      \n      if (loadingToast) loadingToast.close(); // ‰∫§ÊòìÊàêÂäüÂêéÂÖ≥Èó≠ÊèêÁ§∫\n      showToast(\"ÊäïÁ•®ÊàêÂäüÔºÅ\");\n      // ÊäïÁ•®ÊàêÂäüÂêéÂà∑Êñ∞ÁúãÊùø\n      await getBoardInfo(); \n      \n  } catch(error) {\n      console.error(\"ÊäïÁ•®Â§±Ë¥•:\", error);\n      if (loadingToast) loadingToast.close(); // ‰∫§ÊòìÂ§±Ë¥•Êó∂ÂÖ≥Èó≠ÊèêÁ§∫\n      showToast(\"ÊäïÁ•®Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÊòØÂê¶ÊúâÊäïÁ•®ÊùÉÊàñÂ∑≤ÊäïÁ•®„ÄÇ\");\n  } \n};\n\n// ‚ùå ÁßªÈô§ initEventListen()ÔºöÊÇ®ÁöÑÂêàÁ∫¶‰∏≠Ê≤°ÊúâÂÆö‰πâ‰∫ã‰ª∂ÔºåËØ•ÂáΩÊï∞Ë¢´ÁßªÈô§„ÄÇ\n\nonMounted(() => {\n  getBoardInfo();\n});\n</script>\n\n<template>\n  <div class=\"box3\">\n    <van-divider>ÊäïÁ•®ÁúãÊùø</van-divider>\n    <van-cell :title=\"item.name\" icon=\"shop-o\" v-for=\"(item, index) in board\" :key=\"index\">\n      <template #right-icon>\n        <van-button size=\"small\" type=\"primary\" @click=\"vote(index)\">\n           ÊäïÁ•® ({{ item.voteCount }} Á•®)\n        </van-button>\n      </template>\n    </van-cell>\n    <div v-if=\"board.length === 0\" style=\"text-align: center; color: #999; padding: 20px;\">\n      Âä†ËΩΩ‰∏≠ÊàñÊ≤°Êúâ‰∏ªÈ¢ò\n    </div>\n  </div>\n</template>\n\n<style lang=\"less\">\n.box3 {\n  padding: 10px;\n}\n</style>","import script from \"./BoardView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BoardView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./BoardView.vue?vue&type=style&index=0&id=446606f4&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["useWeb3","voteContract","web3","getAccount","board","ref","getBoardInfo","methods","call","result","value","console","error","showToast","vote","index","account","loadingToast","type","message","forbidClick","duration","send","from","close","onMounted","__exports__"],"sourceRoot":""}