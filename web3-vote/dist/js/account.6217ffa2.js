"use strict";(self["webpackChunkweb3_vote"]=self["webpackChunkweb3_vote"]||[]).push([[809],{4200:(e,t,n)=>{n.r(t),n.d(t,{default:()=>q});var r=n(9545),l=(n(2332),n(1471)),a=(n(7603),n(4361)),u=(n(1323),n(5331)),o=(n(9041),n(1404)),c=n(6084),i=n(3396),s=n(5010),v=n(610),d=n(5323),f=n(5322),p=n(3649),m=(0,v["do"])("tag"),w=(0,c.Z)(m,2),g=w[0],b=w[1],k={size:String,mark:Boolean,show:d.J5,type:(0,d.SQ)("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean},x=(0,i.aZ)({name:g,props:k,emits:["close"],setup:function(e,t){var n=t.slots,r=t.emit,l=function(e){e.stopPropagation(),r("close",e)},a=function(){return e.plain?{color:e.textColor||e.color,borderColor:e.color}:{color:e.textColor,background:e.color}},u=function(){var t,r=e.type,u=e.mark,o=e.plain,c=e.round,s=e.size,v=e.closeable,d={mark:u,plain:o,round:c};s&&(d[s]=s);var m=v&&(0,i.Wm)(p.JO,{name:"cross",class:[b("close"),f.e9],onClick:l},null);return(0,i.Wm)("span",{style:a(),class:b([d,r])},[null==(t=n["default"])?void 0:t.call(n),m])};return function(){return(0,i.Wm)(s.uT,{name:e.closeable?"van-fade":void 0},{default:function(){return[e.show?u():null]}})}}}),h=(0,o.n)(x),y=(n(1958),n(368),n(6742),n(4250)),C=(n(7461),n(2691)),W=(n(1209),n(124)),_=n(8534),Z=n(7139),S=n(4870),z=n(4816),B=n(4445),F={class:"box2"},T={class:"address"},U={class:"btn-box"},D={key:0,style:{color:"red","text-align":"center","margin-top":"10px"}},H={key:1,style:{color:"red","text-align":"center","margin-top":"10px"}};const V={__name:"AccountView",setup:function(e){var t=(0,B.Z)(),n=t.web3,o=t.voteContract,c=t.getAccount,s=t.sbtContract,v=(0,S.iH)(""),d=(0,S.iH)({weight:0,delegate:"0x0000000000000000000000000000000000000000",voted:!1,vote:0}),f=(0,S.iH)(""),p=(0,S.iH)(!1),m=(0,i.Fl)((function(){return d.value.delegate&&"0x0000000000000000000000000000000000000000"!==d.value.delegate?d.value.delegate:"æœªå§”æ‰˜"})),w=(0,i.Fl)((function(){return d.value.voted?"æ˜¯":"å¦"})),g=function(){var e=(0,_.Z)((0,W.Z)().mark((function e(){return(0,W.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:if(v.value=e.sent,v.value&&o){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,o.methods.voters(v.value).call();case 8:if(d.value=e.sent,!s){e.next=13;break}return e.next=12,s.methods.hasSBT(v.value).call();case 12:p.value=e.sent;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](5),console.error("èŽ·å–é€‰æ°‘ä¿¡æ¯å¤±è´¥:",e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=(0,_.Z)((0,W.Z)().mark((function e(){var t;return(0,W.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(p.value){e.next=2;break}return e.abrupt("return",(0,z.CF)("è¯·å…ˆç»‘å®š SBT èº«ä»½æ‰èƒ½è¿›è¡Œå§”æ‰˜ï¼"));case 2:if(n&&f.value&&n.utils.isAddress(f.value)){e.next=4;break}return e.abrupt("return",(0,z.CF)("è¯·è¾“å…¥æœ‰æ•ˆçš„å—æ‰˜äººåœ°å€ï¼"));case 4:return t=null,e.prev=5,t=(0,z.CF)({type:"loading",message:"æ­£åœ¨å‘é€å§”æ‰˜äº¤æ˜“...",forbidClick:!0,duration:0}),e.next=9,o.methods.delegate(f.value).send({from:v.value,gas:"3000000"});case 9:return t&&t.close(),(0,z.CF)("å§”æ‰˜æˆåŠŸï¼"),e.next=13,g();case 13:e.next=20;break;case 15:e.prev=15,e.t0=e["catch"](5),console.error("å§”æ‰˜å¤±è´¥:",e.t0),t&&t.close(),(0,z.CF)("å§”æ‰˜å¤±è´¥ï¼Œè¯·æ£€æŸ¥äº¤æ˜“æ—¥å¿—æˆ–å§”æ‰˜çŽ¯è·¯ã€‚");case 20:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(){return e.apply(this,arguments)}}();return(0,i.bv)((0,_.Z)((0,W.Z)().mark((function e(){return(0,W.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:case"end":return e.stop()}}),e)})))),function(e,t){var n=C.iz,o=y.bL,c=h,s=u.TS,g=a.T,k=l.gN,x=r.zx;return(0,i.wg)(),(0,i.iD)("div",F,[(0,i.Wm)(n,null,{default:(0,i.w5)((function(){return[(0,i.Uk)("è´¦æˆ·ä¿¡æ¯")]})),_:1}),(0,i.Wm)(g,{direction:"vertical",fill:""},{default:(0,i.w5)((function(){return[(0,i.Wm)(s,{inset:""},{default:(0,i.w5)((function(){return[(0,i.Wm)(o,{title:"å½“å‰è´¦æˆ·",value:v.value},null,8,["value"]),(0,i.Wm)(o,{title:"SBT ç»‘å®šçŠ¶æ€"},{value:(0,i.w5)((function(){return[(0,i.Wm)(c,{type:p.value?"success":"danger"},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,Z.zw)(p.value?"å·²ç»‘å®š":"æœªç»‘å®š"),1)]})),_:1},8,["type"])]})),_:1}),(0,i.Wm)(o,{title:"è´¦æˆ·ç¥¨æ•° (weight)",value:d.value.weight},null,8,["value"]),(0,i.Wm)(o,{title:"å§”æ‰˜è´¦æˆ· (delegate)"},{value:(0,i.w5)((function(){return[(0,i._)("p",T,(0,Z.zw)((0,S.SU)(m)),1)]})),_:1}),(0,i.Wm)(o,{title:"æ˜¯å¦å·²æŠ•ç¥¨ (voted)",value:(0,S.SU)(w)},null,8,["value"]),d.value.voted?((0,i.wg)(),(0,i.j4)(o,{key:0,title:"å·²æŠ•ææ¡ˆID (vote)",value:d.value.vote},null,8,["value"])):(0,i.kq)("",!0)]})),_:1})]})),_:1}),(0,i.Wm)(n,null,{default:(0,i.w5)((function(){return[(0,i.Uk)("å§”æ‰˜æŠ•ç¥¨")]})),_:1}),(0,i.Wm)(s,{inset:""},{default:(0,i.w5)((function(){return[(0,i.Wm)(k,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return f.value=e}),rows:"1",autosize:"",label:"å—æ‰˜äººåœ°å€",type:"textarea",placeholder:"è¯·è¾“å…¥å—æ‰˜äººçš„é’±åŒ…åœ°å€"},null,8,["modelValue"])]})),_:1}),(0,i._)("div",U,[(0,i.Wm)(x,{type:"primary",size:"large",disabled:d.value.voted||!p.value,onClick:b},{default:(0,i.w5)((function(){return[(0,i.Uk)(" å§”æ‰˜æŠ•ç¥¨ ")]})),_:1},8,["disabled"]),d.value.voted?((0,i.wg)(),(0,i.iD)("p",D,"ðŸš¨ æ‚¨å·²æŠ•ç¥¨ï¼Œæ— æ³•å†å§”æ‰˜ã€‚")):p.value?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",H,"ðŸš¨ è¯·å…ˆç»‘å®š SBT èº«ä»½æ‰èƒ½è¿›è¡Œå§”æ‰˜ã€‚"))])])}}},A=V,q=A},7461:(e,t,n)=>{n(1958),n(368),n(6742),n(3094)}}]);
//# sourceMappingURL=account.6217ffa2.js.map