"use strict";(self["webpackChunkweb3_vote"]=self["webpackChunkweb3_vote"]||[]).push([[809],{911:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var u=n(6835),a=n(8534),r=n(6252),l=n(3577),c=n(2262),i=n(8970),o=n(4445),s={class:"box2"},v={class:"address"},d={class:"btn-box"},p={key:0,style:{color:"red","text-align":"center","margin-top":"10px"}},f={key:1,style:{color:"red","text-align":"center","margin-top":"10px"}};const w={__name:"AccountView",setup:function(e){var t=(0,o.Z)(),n=t.web3,w=t.voteContract,m=t.getAccount,g=t.sbtContract,b=(0,c.iH)(""),k=(0,c.iH)({weight:0,delegate:"0x0000000000000000000000000000000000000000",voted:!1,vote:0}),x=(0,c.iH)(""),h=(0,c.iH)(!1),_=(0,r.Fl)((function(){return k.value.delegate&&"0x0000000000000000000000000000000000000000"!==k.value.delegate?k.value.delegate:"æœªå§”æ‰˜"})),y=(0,r.Fl)((function(){return k.value.voted?"æ˜¯":"å¦"})),W=function(){var e=(0,a.Z)((0,u.Z)().mark((function e(){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:if(b.value=e.sent,b.value&&w){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,w.methods.voters(b.value).call();case 8:if(k.value=e.sent,!g){e.next=13;break}return e.next=12,g.methods.hasSBT(b.value).call();case 12:h.value=e.sent;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](5),console.error("è·å–é€‰æ°‘ä¿¡æ¯å¤±è´¥:",e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=(0,a.Z)((0,u.Z)().mark((function e(){var t;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(h.value){e.next=2;break}return e.abrupt("return",(0,i.CF)("è¯·å…ˆç»‘å®š SBT èº«ä»½æ‰èƒ½è¿›è¡Œå§”æ‰˜ï¼"));case 2:if(n&&x.value&&n.utils.isAddress(x.value)){e.next=4;break}return e.abrupt("return",(0,i.CF)("è¯·è¾“å…¥æœ‰æ•ˆçš„å—æ‰˜äººåœ°å€ï¼"));case 4:return t=null,e.prev=5,t=(0,i.CF)({type:"loading",message:"æ­£åœ¨å‘é€å§”æ‰˜äº¤æ˜“...",forbidClick:!0,duration:0}),e.next=9,w.methods.delegate(x.value).send({from:b.value,gas:"3000000"});case 9:return t&&t.close(),(0,i.CF)("å§”æ‰˜æˆåŠŸï¼"),e.next=13,W();case 13:e.next=20;break;case 15:e.prev=15,e.t0=e["catch"](5),console.error("å§”æ‰˜å¤±è´¥:",e.t0),t&&t.close(),(0,i.CF)("å§”æ‰˜å¤±è´¥ï¼Œè¯·æ£€æŸ¥äº¤æ˜“æ—¥å¿—æˆ–å§”æ‰˜ç¯è·¯ã€‚");case 20:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(){return e.apply(this,arguments)}}();return(0,r.bv)((0,a.Z)((0,u.Z)().mark((function e(){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:case"end":return e.stop()}}),e)})))),function(e,t){var n=(0,r.up)("van-divider"),u=(0,r.up)("van-cell"),a=(0,r.up)("van-tag"),i=(0,r.up)("van-cell-group"),o=(0,r.up)("van-space"),w=(0,r.up)("van-field"),m=(0,r.up)("van-button");return(0,r.wg)(),(0,r.iD)("div",s,[(0,r.Wm)(n,null,{default:(0,r.w5)((function(){return[(0,r.Uk)("è´¦æˆ·ä¿¡æ¯")]})),_:1}),(0,r.Wm)(o,{direction:"vertical",fill:""},{default:(0,r.w5)((function(){return[(0,r.Wm)(i,{inset:""},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,{title:"å½“å‰è´¦æˆ·",value:b.value},null,8,["value"]),(0,r.Wm)(u,{title:"SBT ç»‘å®šçŠ¶æ€"},{value:(0,r.w5)((function(){return[(0,r.Wm)(a,{type:h.value?"success":"danger"},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,l.zw)(h.value?"å·²ç»‘å®š":"æœªç»‘å®š"),1)]})),_:1},8,["type"])]})),_:1}),(0,r.Wm)(u,{title:"è´¦æˆ·ç¥¨æ•° (weight)",value:k.value.weight},null,8,["value"]),(0,r.Wm)(u,{title:"å§”æ‰˜è´¦æˆ· (delegate)"},{value:(0,r.w5)((function(){return[(0,r._)("p",v,(0,l.zw)((0,c.SU)(_)),1)]})),_:1}),(0,r.Wm)(u,{title:"æ˜¯å¦å·²æŠ•ç¥¨ (voted)",value:(0,c.SU)(y)},null,8,["value"]),k.value.voted?((0,r.wg)(),(0,r.j4)(u,{key:0,title:"å·²æŠ•ææ¡ˆID (vote)",value:k.value.vote},null,8,["value"])):(0,r.kq)("",!0)]})),_:1})]})),_:1}),(0,r.Wm)(n,null,{default:(0,r.w5)((function(){return[(0,r.Uk)("å§”æ‰˜æŠ•ç¥¨")]})),_:1}),(0,r.Wm)(i,{inset:""},{default:(0,r.w5)((function(){return[(0,r.Wm)(w,{modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return x.value=e}),rows:"1",autosize:"",label:"å—æ‰˜äººåœ°å€",type:"textarea",placeholder:"è¯·è¾“å…¥å—æ‰˜äººçš„é’±åŒ…åœ°å€"},null,8,["modelValue"])]})),_:1}),(0,r._)("div",d,[(0,r.Wm)(m,{type:"primary",size:"large",disabled:k.value.voted||!h.value,onClick:C},{default:(0,r.w5)((function(){return[(0,r.Uk)(" å§”æ‰˜æŠ•ç¥¨ ")]})),_:1},8,["disabled"]),k.value.voted?((0,r.wg)(),(0,r.iD)("p",p,"ğŸš¨ æ‚¨å·²æŠ•ç¥¨ï¼Œæ— æ³•å†å§”æ‰˜ã€‚")):h.value?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("p",f,"ğŸš¨ è¯·å…ˆç»‘å®š SBT èº«ä»½æ‰èƒ½è¿›è¡Œå§”æ‰˜ã€‚"))])])}}},m=w,g=m}}]);
//# sourceMappingURL=account.a944108f.js.map